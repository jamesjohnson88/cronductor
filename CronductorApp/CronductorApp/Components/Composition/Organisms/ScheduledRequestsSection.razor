@using CronductorApp.RequestScheduler.Models
<!-- Scheduled Requests Section -->
<div class="scheduled-requests-section">
    <div class="is-flex is-justify-content-flex-end is-align-items-center my-2 section-header">
        <StandardButton IconClass="fas fa-plus" Text="Add Request" OnClick="AddRequest" />
    </div>

    <div class="requests-list">
        @if (ScheduledRequests?.Any() == true)
        {
            @foreach (var request in ScheduledRequests)
            {
                <RequestCard 
                    RequestDefinitions="@request" 
                    OnEdit="@EditRequest" 
                    OnDelete="@DeleteRequest" />
            }
        }
        else
        {
            <EmptyState IconClass="fas fa-clock" Title="No Scheduled Requests"
                Subtitle="Get started by adding your first scheduled request.">
                <ActionContent>
                    <SecondaryButton IconClass="fas fa-plus" Text="Add Your First Request" OnClick="AddRequest" />
                </ActionContent>
            </EmptyState>
        }
    </div>
</div>

@code {
    [Parameter]
    public List<RequestDefinition>? ScheduledRequests { get; set; }

    [Parameter]
    public EventCallback OnAddRequest { get; set; }

    [Parameter]
    public EventCallback<string> OnEditRequest { get; set; }

    [Parameter]
    public EventCallback<string> OnDeleteRequest { get; set; }

    private async Task AddRequest()
    {
        await OnAddRequest.InvokeAsync();
    }

    private async Task EditRequest(string requestId)
    {
        await OnEditRequest.InvokeAsync(requestId);
    }

    private async Task DeleteRequest(string requestId)
    {
        await OnDeleteRequest.InvokeAsync(requestId);
    }
}
